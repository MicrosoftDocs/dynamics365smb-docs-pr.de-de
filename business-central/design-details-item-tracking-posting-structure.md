---
title: Design Details - Artikelverfolgungs-Buchungsstruktur | Microsoft Docs
description: Erfahren Sie, wie der Artikelposten als primäre Transportmitteln von Artikelverfolgungsnummern verwendet wird.
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, item tracking, posting, inventory
ms.date: 10/01/2019
ms.author: sgroespe
ms.openlocfilehash: a016863dc7dd5667074060a21e352ce4a56444cd
ms.sourcegitcommit: cfc92eefa8b06fb426482f54e393f0e6e222f712
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 12/03/2019
ms.locfileid: "2880160"
---
# <a name="design-details-item-tracking-posting-structure"></a><span data-ttu-id="7c018-103">Designdetails: Artikelverfolgungs-Buchungsstruktur</span><span class="sxs-lookup"><span data-stu-id="7c018-103">Design Details: Item Tracking Posting Structure</span></span>
<span data-ttu-id="7c018-104">Um der Bestandskalkulationsfunktionen zu entsprechen und eine einfachere und robustere Lösung zu erhalten, werden Artikelposten als der primäre Träger von Artikelverfolgungsnummern verwendet.</span><span class="sxs-lookup"><span data-stu-id="7c018-104">To align with inventory costing functionality and to obtain a simpler and more robust solution, item ledger entries are used as the primary carrier of item tracking numbers.</span></span>  
  
<span data-ttu-id="7c018-105">Artikelverfolgungsnummern auf Auftragsnetzwerkeinheiten und nicht auftragsbezogenen Netzwerkeinheiten werden in der Tabelle **Reservierungsposten** (T337) angegeben.</span><span class="sxs-lookup"><span data-stu-id="7c018-105">Item tracking numbers on order network entities and non-order network entities are specified in the **Reservation Entry** table (T337).</span></span> <span data-ttu-id="7c018-106">Artikelverfolgungsnummern, die mit den historischen Informationen verknüpft sind, werden direkt aus den Artikelposten abgerufen, die mit der jeweiligen Transaktion verknüpft werden.</span><span class="sxs-lookup"><span data-stu-id="7c018-106">Item tracking numbers that are related to historical information are retrieved directly from the item ledger entries that are related to the transaction in question.</span></span> <span data-ttu-id="7c018-107">Das bedeutet, dass Artikelposten die Artikelverfolgungsspezifikationen der gebuchten Auftragszeile widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="7c018-107">This means that item ledger entries reflect the item tracking specification of the posted order line.</span></span>  
  
<span data-ttu-id="7c018-108">Die Seite **Artikelverfolgungszeilen** ruft die Informationen aus T337 und den Artikelposten ab und zeigt sie in der temporären Tabelle, **Verfolgungsspezifikation** (T336) an.</span><span class="sxs-lookup"><span data-stu-id="7c018-108">The **Item Tracking Lines** page retrieves the information from T337 and the item ledger entries and shows it through the temporary table, **Tracking Specification** (T336).</span></span> <span data-ttu-id="7c018-109">T336 enthält auch die temporären Dateien im **Fenster Artikelverfolgungsseiten** für Artikelverfolgungsmengen, die noch fakturiert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="7c018-109">T336 also hold the temporary data in the **Item Tracking Lines page** for item tracking quantities that remain to be invoiced.</span></span>  
  
## <a name="one-to-many-relation"></a><span data-ttu-id="7c018-110">1:n-Beziehung</span><span class="sxs-lookup"><span data-stu-id="7c018-110">One-to-Many Relation</span></span>  
<span data-ttu-id="7c018-111">Die Tabelle **Artikelpostenverbindung**, die verwendet wird, um eine gebuchte Belegzeile mit den entsprechenden Artikelposten zu verknüpfen, besteht aus zwei Hauptteilen:</span><span class="sxs-lookup"><span data-stu-id="7c018-111">The **Item Entry Relation** table, which is used to link a posted document line with its related item ledger entries, consists of two main parts:</span></span>  
  
* <span data-ttu-id="7c018-112">Ein Verweis zu der gebuchten Belegzeile, das Feld **Auftragszeilennr.**.</span><span class="sxs-lookup"><span data-stu-id="7c018-112">A pointer to the posted document line, the **Order Line No.**</span></span> <span data-ttu-id="7c018-113">Feld</span><span class="sxs-lookup"><span data-stu-id="7c018-113">field.</span></span>  
* <span data-ttu-id="7c018-114">Eine Postennummer, die auf einem Artikelposten verweist, das Feld **Artikelposten Lfd. Nr.**.</span><span class="sxs-lookup"><span data-stu-id="7c018-114">An entry number pointing to an item ledger entry, the **Item Entry No.** field.</span></span>  
  
<span data-ttu-id="7c018-115">Die Funktionen des vorhandenen **Lfd. Nr.**- Feldes, das einen Artikelposten mit einer gebuchten Belegzeile verknüpft, bearbeitet die typische Eins-zu-eins-Verknüpfung, wenn keine Artikelverfolgungsnummern auf der gebuchten Belegzeile vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="7c018-115">The functionality of the existing **Entry No.** field, which relates an item ledger entry to a posted document line, handles the typical one-to-one relation when no item tracking numbers exist on the posted document line.</span></span> <span data-ttu-id="7c018-116">Wenn Artikelverfolgungsnummern vorhanden sind, bleibt das Feld **Lfd. Nr.** leer, und die Eins-zu-viele-Relation wird durch die Tabelle **Artikelpostenverbindung** verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="7c018-116">If item tracking numbers exist, then the **Entry No.** field is left blank, and the one-to-many relation is handled by the **Item Entry Relation** table.</span></span> <span data-ttu-id="7c018-117">Wenn die gebuchte Belegzeile Artikelverfolgungsnummern enthält, sich jedoch nur auf einem einzelnen Artikelposten bezieht, verarbeitet das Feld **Lfd. Nr.** die Verknüpfung, und es wird kein Datensatz in der Tabelle **Artikelpostenverbindung** erstellt.</span><span class="sxs-lookup"><span data-stu-id="7c018-117">If the posted document line carries item tracking numbers but only relates to a single item ledger entry, then the **Entry No.** field handles the relation, and the no record is created in the **Item Entry Relation** table.</span></span>  
  
## <a name="codeunits-80-and-90"></a><span data-ttu-id="7c018-118">Codeunit 80 und 90</span><span class="sxs-lookup"><span data-stu-id="7c018-118">Codeunits 80 and 90</span></span>  
<span data-ttu-id="7c018-119">Um die Artikelposten für die Buchung zu teilen, ist der Code in Codeunit 80 und in Codeunit 90 durch Schleifen eingekreist, die durch globale temporäre Datensatzvariablen laufen.</span><span class="sxs-lookup"><span data-stu-id="7c018-119">To split the item ledger entries during posting, the code in codeunit 80 and codeunit 90, is encircled by loops that run through global temporary record variables.</span></span> <span data-ttu-id="7c018-120">Dieser Code ruft Codeeinnheit 22 mit einer Artikel Buch.-Blattzeile auf.</span><span class="sxs-lookup"><span data-stu-id="7c018-120">This code calls codeunit 22 with an item journal line.</span></span> <span data-ttu-id="7c018-121">Diese Variablen werden initialisiert, wenn Artikelverfolgungsnummern für die Belegzeile vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="7c018-121">These variables are initialized when item tracking numbers exist for the document line.</span></span> <span data-ttu-id="7c018-122">Um den Code einfach zu halten, wird diese Schleifenstruktur immer verwendet.</span><span class="sxs-lookup"><span data-stu-id="7c018-122">To keep the code simple, this looping structure is always used.</span></span> <span data-ttu-id="7c018-123">Wenn keine Artikelverfolgungsnummern für die Belegzeile vorhanden, wird ein einzelner Datensatz eingefügt, und die Schleife wird einmal ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7c018-123">If no item tracking numbers exist for the document line, then a single record is inserted, and the loop runs only once.</span></span>  
  
## <a name="posting-the-item-journal"></a><span data-ttu-id="7c018-124">Buchen des Artikel Buch.-Blatts.</span><span class="sxs-lookup"><span data-stu-id="7c018-124">Posting the Item Journal</span></span>  
<span data-ttu-id="7c018-125">Artikelverfolgungsnummern werden über die Reservierungsposten übertragen, die mit dem Artikelposten verknüpft sind, und der Kreis durch die Artikelverfolgungsnummern erfolgt in Codeunit 22.</span><span class="sxs-lookup"><span data-stu-id="7c018-125">Item tracking numbers are transferred via the reservation entries that relate to the item ledger entry, and the looping through item tracking numbers occurs in codeunit 22.</span></span> <span data-ttu-id="7c018-126">Das Konzept arbeitet gleich wie wenn eine Artikel Buch.-Blattzeile indirekt verwendet wird, um einen Einkauf oder eine Einkaufsbestellung beispielsweise zu buchen, wenn die Artikel Buch.-Blattzeile direkt verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="7c018-126">This concept works in the same way when an item journal line is used indirectly to post a sale or purchase order as when an item journal line is used directly.</span></span> <span data-ttu-id="7c018-127">Wenn das Artikel Buch.-Blatt direkt verwendet wird, auf das Feld **Quellzeile ID** der Artikel Buch.-Blattzeile selbst.</span><span class="sxs-lookup"><span data-stu-id="7c018-127">When the item journal is used directly, the **Source Row ID** field points to the item journal line itself.</span></span>  
  
## <a name="code-unit-22"></a><span data-ttu-id="7c018-128">Code Unit 22</span><span class="sxs-lookup"><span data-stu-id="7c018-128">Code Unit 22</span></span>  
<span data-ttu-id="7c018-129">Codeunit 80 und 90 durchlaufen den Aufruf von Codeunit 22 während der Rechnungsbuchung von Artikelverfolgungsnummern und während der Fakturierung der vorhandenen Lieferungen oder Wareneingänge.</span><span class="sxs-lookup"><span data-stu-id="7c018-129">Codeunits 80 and 90 loop the call of codeunit 22 during the invoice posting of item tracking numbers and during the invoicing of existing shipments or receipts.</span></span>  
  
<span data-ttu-id="7c018-130">Während der Mengenbuchung von Artikelverfolgungsnummern ruft Codeunit 22 Artikelverfolgungsnummern aus den Posten in T337 ab, die sich auf die Buchung beziehen.</span><span class="sxs-lookup"><span data-stu-id="7c018-130">During quantity posting of item tracking numbers, codeunit 22 retrieves item tracking numbers from the entries in T337 that relate to the posting.</span></span> <span data-ttu-id="7c018-131">Diese Posten werden direkt in die Artikel Buch.-Blattzeile gesetzt.</span><span class="sxs-lookup"><span data-stu-id="7c018-131">These entries are placed directly on the item journal line.</span></span>  
  
<span data-ttu-id="7c018-132">Codeunit 22 durchläuft die Artikelverfolgungsnummern und teilt die Posten in die entsprechenden Artikelposten ein, die die Artikelverfolgungsnummern enthalten.</span><span class="sxs-lookup"><span data-stu-id="7c018-132">Codeunit 22 loops through the item tracking numbers and splits the posting into the respective item ledger entries that carry the item tracking numbers.</span></span> <span data-ttu-id="7c018-133">Informationen darüber, welche Artikelposten erstellt werden, werden auf T337 zurückgegeben, indem ein temporärer Datensatz T336 verwendet wird, der durch ein Verfahren in Codeunit 22 aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7c018-133">Information about which item ledger entries are created is returned to T337 by using a temporary T336 record, which is called by a procedure in codeunit 22.</span></span> <span data-ttu-id="7c018-134">Dieses Verfahren wird gestartet, wenn Codeunit 22 seine Ausführung beendet, da für diesen Artikel, das Objekt der Codeunit 22 die Informationen enthält.</span><span class="sxs-lookup"><span data-stu-id="7c018-134">This procedure is triggered when codeunit 22 has finished its run because at that point, the codeunit 22 object contains the information.</span></span> <span data-ttu-id="7c018-135">Wenn der temporäre Datensatz T336 abgerufen wird, erstellen Codeunit 80 und 90 Datensätze in der Tabelle **Artikelpostenverbindung**, um die erstellten Artikelposten mit der erstellten Lieferung oder der Lieferzeile zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="7c018-135">When the temporary T336 record is retrieved, codeunits 80 and 90 create records in the **Item Entry Relation** table to link the created item ledger entries to the created shipment or receipt line.</span></span> <span data-ttu-id="7c018-136">Codeunit 80 oder Codeunit 90 konvertiert dann die temporären T336-Datensätze zu realen T336-Datensätzen, die zu der jeweiligen Zeile gehören.</span><span class="sxs-lookup"><span data-stu-id="7c018-136">Codeunits 80 or codeunit 90 then converts the temporary T336 records to real T336 records that are related to the line in question.</span></span> <span data-ttu-id="7c018-137">Jedoch tritt diese Konvertierung nur auf, wenn die gebuchte Belegzeile nicht gelöscht wird, da sie nur teilweise gebucht wird.</span><span class="sxs-lookup"><span data-stu-id="7c018-137">However, this conversion occurs only if the posted document line is not deleted, because it is only partially posted.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7c018-138">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="7c018-138">See Also</span></span>  
<span data-ttu-id="7c018-139">[Designdetails: Artikelnachverfolgung](design-details-item-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="7c018-139">[Design Details: Item Tracking](design-details-item-tracking.md) </span></span>  
[<span data-ttu-id="7c018-140">Designdetails: Artikelverfolgungsdesign</span><span class="sxs-lookup"><span data-stu-id="7c018-140">Design Details: Item Tracking Design</span></span>](design-details-item-tracking-design.md)